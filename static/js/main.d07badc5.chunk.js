(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{159:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"init",function(){return O}),a.d(n,"login",function(){return j}),a.d(n,"logout",function(){return y}),a.d(n,"register",function(){return w}),a.d(n,"default",function(){return k});a(96);var r=a(0),c=a.n(r),l=a(89),u=a.n(l),o=a(162),i=a(10),s=a(11),m=a(8),p=a(28),d=a.n(p),h="https://conduit.productionready.io/api",f=function(e){return d.a.delete("".concat(h).concat(e))},b=function(e){return d.a.get("".concat(h).concat(e))},g=function(e,t){return d.a.put("".concat(h).concat(e),t)},E=function(e,t){return d.a.post("".concat(h).concat(e),t)},v={setToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(window.localStorage.setItem("jwt",e),d.a.defaults.headers.common.Authorization="Token ".concat(e)):(window.localStorage.removeItem("jwt"),delete d.a.defaults.headers.common.Authorization)},Auth:{current:function(){return b("/user")},login:function(e,t){return E("/users/login",{user:{email:e,password:t}})},register:function(e,t,a){return E("/users",{user:{username:e,email:t,password:a}})},save:function(e){return g("/user",{user:e})}},Articles:{all:function(e){return b("/articles?".concat(function(e,t){return"limit=".concat(e,"&offset=").concat(t?t*e:0)}(10,e)))},create:function(e){return E("/articles",{article:e})},update:function(e){return g("/articles/".concat(e.slug),{article:e})},del:function(e){return f("/articles/".concat(e))},get:function(e){return b("/articles/".concat(e))}},Profile:{follow:function(e){return E("/profiles/".concat(e,"/follow"))},get:function(e){return b("/profiles/".concat(e))},unfollow:function(e){return f("/profiles/".concat(e,"/follow"))}}},O=function(){return{type:"LOGIN",payload:v.Auth.current()}},j=function(e,t){return{type:"LOGIN",payload:v.Auth.login(e,t)}},y=function(){return{type:"LOGOUT"}},w=function(e,t,a){return{type:"REGISTER",payload:v.Auth.register(e,t,a)}},I={user:localStorage.getItem("jwt")||null,userInfo:{},loading:!1,error:[]},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;return Object(m.a)(e,function(a){switch(t.type){case"LOGIN_PENDING":case"REGISTER_PENDING":return void(a.loading=!0);case"LOGIN_SUCCESS":case"REGISTER_SUCCESS":var n=t.payload.data.user.token;return v.setToken(n),a.user=n,a.userInfo=t.payload.data.user,a.loading=!1,void(a.error=[]);case"LOGIN_FAILURE":case"REGISTER_FAILURE":var r=t.payload.response.data.errors,c=Object.keys(r).map(function(e){return"".concat(e," ").concat(r[e].join(", "))});return a.loading=!1,void(a.error=c);case"LOGOUT":return v.setToken(null),a.user=null,void(a.userInfo={});default:return e}})},A=Object(s.c)({auth:k}),S=a(92),C=a(94),N=Object(C.a)({promiseTypeSuffixes:["PENDING","SUCCESS","FAILURE"]}),x=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,L=Object(s.e)(A,x(Object(s.a)(S.a,N))),T=a(3),G=a(4),_=a(6),D=a(5),R=a(7),F=a(165),U=a(161),H=a(164),B=a(163),P=function(e){var t=function(t){function a(){return Object(T.a)(this,a),Object(_.a)(this,Object(D.a)(a).apply(this,arguments))}return Object(R.a)(a,t),Object(G.a)(a,[{key:"render",value:function(){return this.props.user?c.a.createElement(e,this.props):c.a.createElement(B.a,{to:"/login"})}}]),a}(r.Component);return Object(i.b)(function(e){return{user:e.auth.user,userInfo:e.auth.userInfo}},function(e){return{authActions:Object(s.b)(n,e)}})(t)},M=a(160),z=function(e){function t(){return Object(T.a)(this,t),Object(_.a)(this,Object(D.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props.user;return c.a.createElement("header",null,c.a.createElement("h1",null,"World"),c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(M.a,{to:"/"},"Home")),e?c.a.createElement(c.a.Fragment,null,c.a.createElement("li",null,c.a.createElement(M.a,{to:"/form"},"\uae00\ub4f1\ub85d")),c.a.createElement("li",null,c.a.createElement(M.a,{to:"/Logout"},"\ub85c\uadf8\uc544\uc6c3"))):c.a.createElement(c.a.Fragment,null,c.a.createElement("li",null,c.a.createElement(M.a,{to:"/login"},"\ub85c\uadf8\uc778")),c.a.createElement("li",null,c.a.createElement(M.a,{to:"/join"},"\ud68c\uc6d0\uac00\uc785")))))}}]),t}(r.Component),J=Object(i.b)(function(e){return{user:e.auth.user}},function(e){return{}})(z),X=a(16),V=a.n(X),W=a(27),q=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(_.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={articlesCount:0,articles:[]},a.fetchArticles=Object(W.a)(V.a.mark(function e(){var t,n,r,c;return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.Articles.all();case 2:t=e.sent,n=t.data,r=n.articlesCount,c=n.articles,a.setState(Object(m.a)(function(e){e.articlesCount=r,e.articles=c}));case 6:case"end":return e.stop()}},e,this)})),a}return Object(R.a)(t,e),Object(G.a)(t,[{key:"componentDidMount",value:function(){this.fetchArticles()}},{key:"render",value:function(){var e=this.state,t=e.articlesCount,a=e.articles;return c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"Home"),c.a.createElement(M.a,{to:"/form"},"\uae00\ub4f1\ub85d"),c.a.createElement("p",null,"total : ",t),c.a.createElement("ul",null,a.map(function(e){return c.a.createElement("li",{key:e.slug},c.a.createElement("p",{className:"title"},c.a.createElement(M.a,{to:"/article/".concat(e.slug)},"\uc81c\ubaa9 : ",e.title)),c.a.createElement("p",{className:"desc"},e.description),c.a.createElement("div",{className:"info"},c.a.createElement("span",{className:"author"},"\uc791\uc131\uc790: ",e.author.username)," ",c.a.createElement("span",{className:"date"},"\uc791\uc131\uc77c: ",e.createdAt)," ",c.a.createElement("span",{className:"tag"},"Tag: ",e.tagList.join(", "))))})))}}]),t}(r.Component),K=Object(i.b)(function(e){return{}},function(e){return{}})(q),Q=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(_.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.submitHandle=function(e){var t=a.props.authActions,n=a.state,r=n.email,c=n.password;t.login(r,c),e.preventDefault()},a.changeInput=function(e){return function(t){var n=t.target.value;a.setState(Object(m.a)(function(t){t[e]=n}))}},a}return Object(R.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.loading,n=e.error;return t?c.a.createElement(B.a,{to:"/"}):c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"\ub85c\uadf8\uc778"),c.a.createElement("form",{onSubmit:this.submitHandle},c.a.createElement("fieldset",null,c.a.createElement("div",null,c.a.createElement("label",null,"email",c.a.createElement("input",{type:"email",disabled:a,onChange:this.changeInput("email")}))),c.a.createElement("div",null,c.a.createElement("label",null,"password",c.a.createElement("input",{type:"password",disabled:a,onChange:this.changeInput("password")}))),a&&c.a.createElement("div",null,"\ub85c\uadf8\uc778 \uc911..."),n.length>0&&n.map(function(e){return c.a.createElement("div",{key:e},e)}),c.a.createElement("button",{type:"submit",disabled:a},"\ub85c\uadf8\uc778"))))}}]),t}(r.Component),Y=Object(i.b)(function(e){return{user:e.auth.user,loading:e.auth.loading,error:e.auth.error}},function(e){return{authActions:Object(s.b)(n,e)}})(Q),Z=function(e){function t(e){var a;return Object(T.a)(this,t),a=Object(_.a)(this,Object(D.a)(t).call(this,e)),e.authActions.logout(),a}return Object(R.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){return c.a.createElement(B.a,{to:"/"})}}]),t}(r.Component),$=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(_.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",email:"",password:""},a.submitHandle=function(e){var t=a.props.authActions,n=a.state,r=n.username,c=n.email,l=n.password;t.register(r,c,l),e.preventDefault()},a.changeInput=function(e){return function(t){var n=t.target.value;a.setState(Object(m.a)(function(t){t[e]=n}))}},a}return Object(R.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.loading,n=e.error,r=e.history,l=this.state,u=l.username,o=l.email,i=l.password;return t?c.a.createElement(B.a,{to:"/"}):c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"\ud68c\uc6d0\uac00\uc785"),c.a.createElement("form",{onSubmit:this.submitHandle},c.a.createElement("fieldset",null,c.a.createElement("div",null,c.a.createElement("label",null,"username",c.a.createElement("input",{type:"text",disabled:a,value:u,onChange:this.changeInput("username")}))),c.a.createElement("div",null,c.a.createElement("label",null,"email",c.a.createElement("input",{type:"email",disabled:a,value:o,onChange:this.changeInput("email")}))),c.a.createElement("div",null,c.a.createElement("label",null,"password",c.a.createElement("input",{type:"password",disabled:a,value:i,onChange:this.changeInput("password")}))),a&&c.a.createElement("div",null,"\ud68c\uc6d0\uac00\uc785 \uc911..."),n.length>0&&n.map(function(e){return c.a.createElement("div",{key:e},e)}),c.a.createElement("button",{type:"submit",disabled:a},"\ud68c\uc6d0\uac00\uc785")," ",c.a.createElement("button",{type:"button",disabled:a,onClick:r.goBack},"\ucde8\uc18c"))))}}]),t}(r.Component),ee=Object(i.b)(function(e){return{user:e.auth.user,loading:e.auth.loading,error:e.auth.error}},function(e){return{authActions:Object(s.b)(n,e)}})($),te=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(_.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!1,sending:!1,slug:"",title:"",description:"",body:"",tag:""},a.fetchArticles=function(){var e=Object(W.a)(V.a.mark(function e(t){var n,r,c,l,u,o;return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState(Object(m.a)(function(e){e.loading=!0})),n=a.props,r=n.history,c=n.username,e.next=4,v.Articles.get(t);case 4:if(l=e.sent,u=l.data,(o=u.article).author.username===c){e.next=11;break}return alert("\uc218\uc815 \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."),r.goBack(),e.abrupt("return");case 11:a.setState(Object(m.a)(function(e){e.loading=!1,e.slug=o.slug,e.title=o.title,e.description=o.description,e.body=o.body,e.tag=o.tagList.join(", ")}));case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.submitHandle=function(e){var t=a.props,n=t.history,r=t.match,c=a.state,l=c.slug,u=c.title,o=c.description,i=c.body,s=c.tag,p=s.length?s.split(",").map(function(e){return e.trim()}):[];a.setState(Object(m.a)(function(e){e.sending=!0}));var d=r.params.slug?"update":"create";v.Articles[d]({slug:l,title:u,description:o,body:i,tagList:p}).then(function(e){a.setState(Object(m.a)(function(e){e.sending=!1})),n.push("/article/".concat(e.data.article.slug))}).catch(function(e){alert("\ub4f1\ub85d\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4"),a.setState(Object(m.a)(function(e){e.sending=!1}))}),e.preventDefault()},a.changeInput=function(e){return function(t){var n=t.target.value;a.setState(Object(m.a)(function(t){t[e]=n}))}},a}return Object(R.a)(t,e),Object(G.a)(t,[{key:"componentDidUpdate",value:function(e){e.match.params.slug!==this.props.match.params.slug&&(this.props.match.params.slug?this.fetchArticles(this.props.match.params.slug):this.setState(Object(m.a)(function(e){e.loading=!1,e.sending=!1,e.slug="",e.title="",e.description="",e.body="",e.tag=""})))}},{key:"componentDidMount",value:function(){var e=this.props.match.params;e&&e.slug&&this.fetchArticles(e.slug)}},{key:"render",value:function(){var e=this.props,t=e.history,a=e.user,n=e.userInfo,r=this.state,l=r.loading,u=r.sending,o=r.slug,i=r.title,s=r.description,m=r.body,p=r.tag;return console.log(a,n),l?c.a.createElement("div",null):c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,o?"\uae00 \uc218\uc815\ud558\uae30":"\uae00 \ub4f1\ub85d\ud558\uae30"),c.a.createElement("form",{onSubmit:this.submitHandle},c.a.createElement("fieldset",null,c.a.createElement("div",null,c.a.createElement("label",null,"\uc81c\ubaa9",c.a.createElement("input",{type:"text",disabled:u,value:i,onChange:this.changeInput("title")}))),c.a.createElement("div",null,c.a.createElement("label",null,"\uc124\uba85",c.a.createElement("input",{type:"text",disabled:u,value:s,onChange:this.changeInput("description")}))),c.a.createElement("div",null,c.a.createElement("label",null,"\ub0b4\uc6a9",c.a.createElement("textarea",{cols:"60",rows:"10",disabled:u,value:m,onChange:this.changeInput("body")}))),c.a.createElement("div",null,c.a.createElement("label",null,"\ud0dc\uadf8",c.a.createElement("input",{type:"text",disabled:u,value:p,onChange:this.changeInput("tag")}))),u&&c.a.createElement("div",null,"\ub4f1\ub85d \uc911..."),c.a.createElement("button",{type:"submit",disabled:u},"\ub4f1\ub85d")," ",c.a.createElement("button",{type:"button",disabled:u,onClick:t.goBack},"\ucde8\uc18c"))))}}]),t}(r.Component),ae=function(e){function t(){var e,a;Object(T.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(_.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={article:{author:{},tagList:[]}},a.fetchArticles=Object(W.a)(V.a.mark(function e(){var t,n,r;return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params.slug,e.next=3,v.Articles.get(t);case 3:n=e.sent,r=n.data,a.setState(Object(m.a)(function(e){e.article=r.article}));case 6:case"end":return e.stop()}},e,this)})),a.delete=Object(W.a)(V.a.mark(function e(){var t,n;return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state.article.slug,n=a.props.history,!window.confirm("\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){e.next=12;break}return e.prev=3,e.next=6,v.Articles.del(t);case 6:n.goBack(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),alert("\uc0ad\uc81c \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");case 12:case"end":return e.stop()}},e,this,[[3,9]])})),a}return Object(R.a)(t,e),Object(G.a)(t,[{key:"componentDidMount",value:function(){this.fetchArticles()}},{key:"render",value:function(){var e=this.props,t=e.history,a=e.userInfo,n=this.state.article;return c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,n.title),c.a.createElement("p",{className:"desc"},"\uc124\uba85: ",n.description),c.a.createElement("ul",{className:"info"},c.a.createElement("li",{className:"author"},"\uc791\uc131\uc790: ",n.author.username)," ",c.a.createElement("li",{className:"date"},"\uc791\uc131\uc77c: ",n.createdAt)," ",c.a.createElement("li",{className:"tag"},"Tag: ",n.tagList.join(", "))),c.a.createElement("h3",null,"\ub0b4\uc6a9"),c.a.createElement("div",{className:"body"},n.body),c.a.createElement("hr",null),c.a.createElement("div",null,n.author.username===a.username&&c.a.createElement("button",{type:"button",onClick:function(){return t.push("/form/".concat(n.slug))}},"\uc218\uc815")," ",c.a.createElement("button",{type:"button",onClick:this.delete},"\uc0ad\uc81c")))}}]),t}(r.Component),ne=Object(i.b)(function(e){return{userInfo:e.auth.userInfo}},function(e){return{}})(ae),re=function(e){function t(e){var a;Object(T.a)(this,t),a=Object(_.a)(this,Object(D.a)(t).call(this,e));var n=localStorage.getItem("jwt");return n&&(v.setToken(n),e.authActions.init()),a}return Object(R.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(J,null),c.a.createElement("hr",null),c.a.createElement(F.a,null,c.a.createElement(U.a,{exact:!0,path:"/",component:K}),c.a.createElement(U.a,{exact:!0,path:"/login",component:Y}),c.a.createElement(U.a,{exact:!0,path:"/logout",component:P(Z)}),c.a.createElement(U.a,{exact:!0,path:"/join",component:ee}),c.a.createElement(U.a,{path:"/article/:slug",component:ne}),c.a.createElement(U.a,{exact:!0,path:"/form",component:P(te)}),c.a.createElement(U.a,{path:"/form/:slug",component:P(te)}),c.a.createElement(U.a,{component:K})))}}]),t}(r.Component),ce=Object(H.a)(Object(i.b)(function(e){return{user:e.auth.user}},function(e){return{authActions:Object(s.b)(n,e)}})(re));u.a.render(c.a.createElement(i.a,{store:L},c.a.createElement(o.a,{basename:"/world"},c.a.createElement(ce,{store:L}))),document.getElementById("root"))},95:function(e,t,a){e.exports=a(159)}},[[95,2,1]]]);