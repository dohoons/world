(window.webpackJsonp=window.webpackJsonp||[]).push([[4,14],{117:function(e,t,a){"use strict";a.r(t);var n=a(165),r=a(49),c=a(530),l=a.n(c),i=a(531),s=a(96),o=a(0),u=a.n(o),m=a(35),d=a(52),p=a(163),f=a(10),b=a(540),g=a.n(b),v=a(528),E=a(164),h=a(240);t.default=Object(v.hot)(function(e){var t=e.history,a=e.match.params,c=Object(d.c)("form").t,b=Object(E.b)(),v=Object(o.useState)(!1),y=Object(s.a)(v,2),N=y[0],j=y[1],O=Object(o.useState)(!1),k=Object(s.a)(O,2),w=k[0],x=k[1],C=Object(o.useState)({}),S=Object(s.a)(C,2),B=S[0],A=S[1],M=Object(o.useState)({slug:"",title:"",description:"",body:"",tag:""}),T=Object(s.a)(M,2),W=T[0],D=T[1],J=W.slug,L=W.title,P=W.description,H=W.body,I=W.tag,R=Object(m.c)(function(e){return e.auth},[]).userInfo,q=Object(o.useRef)(f.a.CancelToken.source()),z=Object(o.useCallback)(function(){var e=Object(i.a)(l.a.mark(function e(a){var n,r,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(!0),e.next=4,f.a.Articles.get({slug:a,config:{cancelToken:q.current.token}});case 4:if(n=e.sent,r=n.data,(i=r.article).author.username===R.username){e.next=11;break}return b.error(c("errorModifyAuth")),t.goBack(),e.abrupt("return");case 11:j(!1),D({slug:i.slug,title:i.title,description:i.description,body:i.body,tag:i.tagList.join(", ")}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),e.t0.response&&"404"===e.t0.response.data.status&&t.goBack();case 18:case"end":return e.stop()}},e,null,[[0,15]])}));return function(t){return e.apply(this,arguments)}}(),[t,b,c,R.username]),F=Object(o.useCallback)(function(){q.current.cancel()},[]);Object(o.useEffect)(function(){return a.slug&&z(a.slug),function(){F()}},[z,F,a.slug]);var G=function(e){return function(t){D(Object(r.a)({},W,Object(n.a)({},e,t.target.value)))}};return N?u.a.createElement("div",null):u.a.createElement(h.default,{className:"container"},u.a.createElement(p.Helmet,{title:c(J?"headingModify":"headingWrite")}),u.a.createElement("div",{className:"common-form"},u.a.createElement("h2",{className:"form-title"},c(J?"headingModify":"headingWrite")),u.a.createElement("form",{onSubmit:function(e){var n=I.length?I.split(",").map(function(e){return e.trim()}):[];if(e.preventDefault(),function(){var e={};return g.a.isEmpty(L)&&(e.title=c("validate:emptyTitle")),g.a.isEmpty(P)&&(e.description=c("validate:emptyDescription")),g.a.isEmpty(H)&&(e.body=c("validate:emptyBody")),0===Object.keys(e).length||(A(e),!1)}()){x(!0),A({});var r=a.slug?"update":"create";f.a.Articles[r]({article:{slug:J,title:L,description:P,body:H,tagList:n}}).then(function(e){x(!1),t.push("/article/".concat(e.data.article.slug))}).catch(function(e){b.error(c("errorWrite")),x(!1)})}}},u.a.createElement("fieldset",null,u.a.createElement("div",{className:"form-row"},u.a.createElement("label",null,u.a.createElement("span",{className:"form-head"},c("title")),u.a.createElement("input",{type:"text",placeholder:c("title"),className:"txt large block",disabled:w,value:L,onChange:G("title")})),B.title&&u.a.createElement("p",{className:"input-error"},u.a.createElement("i",{className:"fas fa-times-circle"})," ",B.title)),u.a.createElement("div",{className:"form-row"},u.a.createElement("label",null,u.a.createElement("span",{className:"form-head"},c("description")),u.a.createElement("input",{type:"text",placeholder:c("description"),className:"txt large block",disabled:w,value:P,onChange:G("description")})),B.description&&u.a.createElement("p",{className:"input-error"},u.a.createElement("i",{className:"fas fa-times-circle"})," ",B.description)),u.a.createElement("div",{className:"form-row"},u.a.createElement("label",null,u.a.createElement("span",{className:"form-head"},c("body")),u.a.createElement("textarea",{cols:"60",rows:"10",placeholder:c("body"),className:"txt large block",disabled:w,value:H,onChange:G("body")})),B.body&&u.a.createElement("p",{className:"input-error"},u.a.createElement("i",{className:"fas fa-times-circle"})," ",B.body)),u.a.createElement("div",{className:"form-row"},u.a.createElement("label",null,u.a.createElement("span",{className:"form-head"},c("tag")),u.a.createElement("input",{type:"text",placeholder:c("tag"),className:"txt large block",disabled:w,value:I,onChange:G("tag")}))),w&&u.a.createElement("div",null,c("sending")),u.a.createElement("div",{className:"form-action"},u.a.createElement("button",{type:"submit",className:"btn large primary",disabled:w},c("common:write"))," ",u.a.createElement("button",{type:"button",className:"btn large",disabled:w,onClick:t.goBack},c("common:cancel")))))))})},240:function(e,t,a){"use strict";a.r(t);var n=a(94),r=a(95);function c(){var e=Object(n.a)(["\n"]);return c=function(){return e},e}t.default=r.a.div(c())},530:function(e,t,a){e.exports=a(238)},531:function(e,t,a){"use strict";function n(e,t,a,n,r,c,l){try{var i=e[c](l),s=i.value}catch(o){return void a(o)}i.done?t(s):Promise.resolve(s).then(n,r)}function r(e){return function(){var t=this,a=arguments;return new Promise(function(r,c){var l=e.apply(t,a);function i(e){n(l,r,c,i,s,"next",e)}function s(e){n(l,r,c,i,s,"throw",e)}i(void 0)})}}a.d(t,"a",function(){return r})}}]);