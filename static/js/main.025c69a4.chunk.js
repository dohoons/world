(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t,a){e.exports=a(67)},67:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"login",function(){return w}),a.d(n,"logout",function(){return j}),a.d(n,"register",function(){return y}),a.d(n,"default",function(){return S});var r=a(0),l=a.n(r),c=a(30),o=a.n(c),u=a(10),i=a(4),s=a(33),m=a(14),d=a.n(m),p="https://conduit.productionready.io/api",f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(window.localStorage.setItem("jwt",e),d.a.defaults.headers.common.Authorization="Token ".concat(e)):(window.localStorage.removeItem("jwt"),delete d.a.defaults.headers.common.Authorization)},h=localStorage.getItem("jwt");h&&f(h);var E=function(e){return d.a.del("".concat(p).concat(e))},b=function(e){return d.a.get("".concat(p).concat(e))},g=function(e,t){return d.a.put("".concat(p).concat(e),t)},v=function(e,t){return d.a.post("".concat(p).concat(e),t)},O={setToken:f,Auth:{current:function(){return b("/user")},login:function(e,t){return v("/users/login",{user:{email:e,password:t}})},register:function(e,t,a){return v("/users",{user:{username:e,email:t,password:a}})},save:function(e){return g("/user",{user:e})}},Articles:{all:function(e){return b("/articles?".concat(function(e,t){return"limit=".concat(e,"&offset=").concat(t?t*e:0)}(10,e)))},create:function(e){return v("/articles",{article:e})}},Profile:{follow:function(e){return v("/profiles/".concat(e,"/follow"))},get:function(e){return b("/profiles/".concat(e))},unfollow:function(e){return E("/profiles/".concat(e,"/follow"))}}},w=function(e,t){return{type:"LOGIN",payload:O.Auth.login(e,t)}},j=function(){return{type:"LOGOUT"}},y=function(e,t,a){return{type:"REGISTER",payload:O.Auth.register(e,t,a)}},I={user:localStorage.getItem("jwt")||null,loading:!1,error:[]},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;return Object(s.a)(e,function(a){switch(t.type){case"LOGIN_PENDING":case"REGISTER_PENDING":return void(a.loading=!0);case"LOGIN_SUCCESS":case"REGISTER_SUCCESS":var n=t.payload.data.user.token;return O.setToken(n),a.user=n,a.loading=!1,void(a.error=[]);case"LOGIN_FAILURE":case"REGISTER_FAILURE":var r=t.payload.response.data.errors;Object.keys(r).map(function(e){return"".concat(e," ").concat(r[e].join(", "))});return a.loading=!1,void(a.error=r);case"LOGOUT":return O.setToken(null),void(a.user=!1);default:return e}})},A=Object(i.c)({auth:S}),C=a(34),k=a(35),N=Object(k.a)({promiseTypeSuffixes:["PENDING","SUCCESS","FAILURE"]}),T=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,G=Object(i.e)(A,T(Object(i.a)(C.a,N))),_=a(7),L=a(8),R=a(11),D=a(9),x=a(12),U=a(71),F=a(68),H=a(70),P=a(15),z=a.n(P),J=a(21),M=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(R.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={articlesCount:0,articles:[]},a.fetchArticles=Object(J.a)(z.a.mark(function e(){var t,n,r,l;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.Articles.all();case 2:t=e.sent,n=t.data,r=n.articlesCount,l=n.articles,a.setState(function(){return{articlesCount:r,articles:l}});case 6:case"end":return e.stop()}},e,this)})),a.testCreate=Object(J.a)(z.a.mark(function e(){var t;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=O.Articles.create({title:new Date,description:"aaaa",body:"aaaasf",tagList:[]}),console.log(t),a.fetchArticles();case 3:case"end":return e.stop()}},e,this)})),a}return Object(x.a)(t,e),Object(L.a)(t,[{key:"componentDidMount",value:function(){this.fetchArticles()}},{key:"render",value:function(){var e=this.state,t=e.articlesCount,a=e.articles;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",null,"Home"),l.a.createElement("div",null,l.a.createElement("button",{type:"button",onClick:this.testCreate},"\ud14c\uc2a4\ud2b8 \uae00\uc4f0\uae30(\ub85c\uadf8\uc778 \ud544\uc694)")),l.a.createElement("p",null,"total : ",t),l.a.createElement("ul",null,a.map(function(e){return l.a.createElement("li",{key:e.slug},l.a.createElement("p",{className:"title"},"\uc81c\ubaa9 : ",e.title),l.a.createElement("p",{className:"desc"},e.description),l.a.createElement("div",{className:"info"},l.a.createElement("span",{className:"author"},"\uc791\uc131\uc790: ",e.author.username)," ",l.a.createElement("span",{className:"date"},"\uc791\uc131\uc77c: ",e.updatedAt)," ",l.a.createElement("span",{className:"tag"},"Tag: ",e.tagList.join(", "))))})))}}]),t}(r.Component),X=a(16),B=a(69),V=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(R.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.submitHandle=function(e){var t=a.props.authActions,n=a.state,r=n.email,l=n.password;t.login(r,l),e.preventDefault()},a.changeInput=function(e){return function(t){var n=t.target.value;a.setState(function(){return Object(X.a)({},e,n)})}},a}return Object(x.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.loading,n=e.error,r=this.state;r.email,r.password;return t?l.a.createElement(B.a,{to:"/"}):l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",null,"\ub85c\uadf8\uc778"),l.a.createElement("form",{onSubmit:this.submitHandle},l.a.createElement("fieldset",null,l.a.createElement("div",null,l.a.createElement("label",null,"email",l.a.createElement("input",{type:"email",disabled:a,onChange:this.changeInput("email")}))),l.a.createElement("div",null,l.a.createElement("label",null,"password",l.a.createElement("input",{type:"password",disabled:a,onChange:this.changeInput("password")}))),a&&l.a.createElement("div",null,"\ub85c\uadf8\uc778 \uc911..."),n.length>1&&n.map(function(e){return l.a.createElement("div",{key:e},e)}),l.a.createElement("button",{type:"submit",disabled:a},"\ub85c\uadf8\uc778"))))}}]),t}(r.Component),W=Object(u.b)(function(e){return{user:e.auth.user,loading:e.auth.loading,error:e.auth.error}},function(e){return{authActions:Object(i.b)(n,e)}})(V),q=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(R.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",email:"",password:""},a.submitHandle=function(e){var t=a.props.authActions,n=a.state,r=n.username,l=n.email,c=n.password;t.register(r,l,c),e.preventDefault()},a.changeInput=function(e){return function(t){var n=t.target.value;a.setState(function(){return Object(X.a)({},e,n)})}},a}return Object(x.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.loading,n=e.error,r=this.state,c=r.username,o=r.email,u=r.password;return t?l.a.createElement(B.a,{to:"/"}):l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",null,"\ud68c\uc6d0\uac00\uc785"),l.a.createElement("form",{onSubmit:this.submitHandle},l.a.createElement("fieldset",null,l.a.createElement("div",null,l.a.createElement("label",null,"username",l.a.createElement("input",{type:"text",disabled:a,value:c,onChange:this.changeInput("username")}))),l.a.createElement("div",null,l.a.createElement("label",null,"email",l.a.createElement("input",{type:"email",disabled:a,value:o,onChange:this.changeInput("email")}))),l.a.createElement("div",null,l.a.createElement("label",null,"password",l.a.createElement("input",{type:"password",disabled:a,value:u,onChange:this.changeInput("password")}))),a&&l.a.createElement("div",null,"\ud68c\uc6d0\uac00\uc785 \uc911..."),n.length>1&&n.map(function(e){return l.a.createElement("div",{key:e},e)}),l.a.createElement("button",{type:"submit",disabled:a},"\ud68c\uc6d0\uac00\uc785")," ",l.a.createElement("button",{type:"button",disabled:a},"\ucde8\uc18c"))))}}]),t}(r.Component),K=Object(u.b)(function(e){return{user:e.auth.user,loading:e.auth.loading,error:e.auth.error}},function(e){return{authActions:Object(i.b)(n,e)}})(q),Q=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(R.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).logout=function(e){a.props.authActions.logout(),e.preventDefault()},a}return Object(x.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this.props.user;return l.a.createElement(U.a,{basename:"/world"},l.a.createElement("div",{className:"wrapper"},l.a.createElement("header",null,l.a.createElement("h1",null,"World"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(F.a,{to:"/"},"Home")),e?l.a.createElement("li",null,l.a.createElement("a",{href:"#",onClick:this.logout},"\ub85c\uadf8\uc544\uc6c3")):l.a.createElement(l.a.Fragment,null,l.a.createElement("li",null,l.a.createElement(F.a,{to:"/login"},"\ub85c\uadf8\uc778")),l.a.createElement("li",null,l.a.createElement(F.a,{to:"/join"},"\ud68c\uc6d0\uac00\uc785"))))),l.a.createElement(H.a,{exact:!0,path:"/",component:M}),l.a.createElement(H.a,{exact:!0,path:"/login",component:W}),l.a.createElement(H.a,{exact:!0,path:"/join",component:K})))}}]),t}(r.Component),Y=Object(u.b)(function(e){return{user:e.auth.user,loading:e.auth.loading,error:e.auth.error}},function(e){return{authActions:Object(i.b)(n,e)}})(Q);o.a.render(l.a.createElement(u.a,{store:G},l.a.createElement(Y,null)),document.getElementById("root"))}},[[36,2,1]]]);
//# sourceMappingURL=main.025c69a4.chunk.js.map