(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{550:function(e,a,t){"use strict";t.r(a);var n=t(45),r=t(46),s=t(48),l=t(47),m=t(49),i=t(0),c=t.n(i),o=t(25),u=t(50),p=t(51),d=t(66),h=t(134),b=t(18),f=t(67),E=t(459),g=t.n(E),v=t(80);function N(){var e=Object(v.a)(["\n"]);return N=function(){return e},e}var w=t(81).a.div(N()),y=function(e){function a(){var e,t;Object(n.a)(this,a);for(var r=arguments.length,m=new Array(r),i=0;i<r;i++)m[i]=arguments[i];return(t=Object(s.a)(this,(e=Object(l.a)(a)).call.apply(e,[this].concat(m)))).state={image:"",username:"",bio:"",email:"",password:"",errors:{}},t.submitHandle=function(e){var a=t.props.authActions,n=t.state,r=n.image,s=n.username,l=n.bio,m=n.email,i=n.password;if(t.setState(Object(b.a)(function(e){e.errors={}})),t.validate()){var c={image:r,username:s,bio:l,email:m};""!==i&&(c.password=i),a.update({user:c}).then(function(e){t.props.history.goBack()})}e.preventDefault()},t.changeInput=function(e){return function(a){var n=a.target.value;t.setState(Object(b.a)(function(a){a[e]=n}))}},t}return Object(m.a)(a,e),Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.userInfo;Object.keys(e).length&&this.setState(Object(b.a)(function(a){a.image=e.image,a.username=e.username,a.bio=e.bio,a.email=e.email}))}},{key:"componentWillUnmount",value:function(){this.props.authActions.resetAuth()}},{key:"validate",value:function(){var e={},a=this.props.t,t=this.state,n=t.username,r=t.email,s=t.password;return g.a.isEmpty(n)?e.username=a("validate:emptyUsername"):g.a.isLength(n,{min:1,max:20})||(e.username=a("validate:lengthUsername")),g.a.isEmpty(r)?e.email=a("validate:emptyEmail"):g.a.isEmail(r)||(e.email=a("validate:notEmail")),g.a.isEmpty(s)||g.a.isLength(s,{min:8})||(e.password=a("validate:lengthPassword")),0===Object.keys(e).length||(this.setState(Object(b.a)(function(a){a.errors=e})),!1)}},{key:"render",value:function(){var e=this.props,a=e.loading,t=e.history,n=e.error,r=e.t,s=this.state,l=s.image,m=s.username,i=s.bio,o=s.email,u=s.password,p=s.errors;return c.a.createElement(w,{className:"container"},c.a.createElement(h.Helmet,null,c.a.createElement("title",null,r("heading")," - ",r("common:siteName"))),c.a.createElement("div",{className:"common-form"},c.a.createElement("h2",{className:"form-title"},r("heading")),c.a.createElement("form",{onSubmit:this.submitHandle},c.a.createElement("fieldset",null,c.a.createElement("div",{className:"form-row"},c.a.createElement("label",null,c.a.createElement("span",{className:"form-head"},r("image")),c.a.createElement("input",{type:"text",placeholder:r("imageURL"),className:"txt large block",disabled:a,value:l,onChange:this.changeInput("image")})),p.image&&c.a.createElement("p",{className:"input-error"},c.a.createElement("i",{className:"fas fa-times-circle"})," ",p.image)),c.a.createElement("div",{className:"form-row"},c.a.createElement("label",null,c.a.createElement("span",{className:"form-head"},r("username")),c.a.createElement("input",{type:"text",placeholder:r("username"),className:"txt large block",disabled:a,value:m,onChange:this.changeInput("username")})),p.username&&c.a.createElement("p",{className:"input-error"},c.a.createElement("i",{className:"fas fa-times-circle"})," ",p.username)),c.a.createElement("div",{className:"form-row"},c.a.createElement("label",null,c.a.createElement("span",{className:"form-head"},r("bio")),c.a.createElement("textarea",{cols:"60",rows:"10",placeholder:r("bio"),className:"txt large block",disabled:a,value:i,onChange:this.changeInput("bio")})),p.bio&&c.a.createElement("p",{className:"input-error"},c.a.createElement("i",{className:"fas fa-times-circle"})," ",p.bio)),c.a.createElement("div",{className:"form-row"},c.a.createElement("label",null,c.a.createElement("span",{className:"form-head"},r("email")),c.a.createElement("input",{type:"text",placeholder:r("email"),className:"txt large block",disabled:a,value:o,onChange:this.changeInput("email")})),p.email&&c.a.createElement("p",{className:"input-error"},c.a.createElement("i",{className:"fas fa-times-circle"})," ",p.email)),c.a.createElement("div",{className:"form-row"},c.a.createElement("label",null,c.a.createElement("span",{className:"form-head"},r("newPassword")),c.a.createElement("input",{type:"password",placeholder:r("newPassword"),className:"txt large block",disabled:a,value:u,onChange:this.changeInput("password")})),p.password&&c.a.createElement("p",{className:"input-error"},c.a.createElement("i",{className:"fas fa-times-circle"})," ",p.password)),a&&c.a.createElement("div",null,r("sending")),n.length>0&&n.map(function(e){return c.a.createElement("p",{className:"input-error",key:e},c.a.createElement("i",{className:"fas fa-times-circle"})," ",e)}),c.a.createElement("div",{className:"form-action"},c.a.createElement("button",{type:"submit",className:"btn large primary",disabled:a},r("common:modify"))," ",c.a.createElement("button",{type:"button",className:"btn large",disabled:a,onClick:t.goBack},r("common:cancel")))))))}}]),a}(i.Component);a.default=Object(d.a)(Object(u.b)(function(e){return{user:e.auth.user,userInfo:e.auth.userInfo,loading:e.auth.loading,error:e.auth.error}},function(e){return{authActions:Object(o.b)(f,e)}}),Object(p.c)("profileEdit"))(y)}}]);