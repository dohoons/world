(this.webpackJsonpworld=this.webpackJsonpworld||[]).push([[4,14],{138:function(e,t,a){"use strict";a.r(t);var r=a(5),n=a.n(r),c=a(544),l=a(111),i=a(0),s=a.n(i),o=a(48),u=a(61),m=a(179),b=a(552),f=a.n(b),d=a(180),p=a(181),g=a(17),O=a(542),v=a(258);t.default=Object(d.hot)((function(e){var t=e.history,a=e.match.params,r=Object(u.c)("form").t,b=Object(p.b)(),d=Object(i.useState)(!1),y=Object(l.a)(d,2),j=y[0],h=y[1],E=Object(i.useState)(!1),k=Object(l.a)(E,2),N=k[0],w=k[1],x=Object(i.useState)({}),C=Object(l.a)(x,2),P=C[0],S=C[1],D=Object(O.a)({slug:"",title:"",description:"",body:"",tag:""}),T=D.form,A=D.setField,B=D.bindInput,I=T.slug,F=T.title,M=T.description,W=T.body,J=T.tag,L=Object(o.c)((function(e){return e.auth})).userInfo,H=Object(i.useRef)(g.a.CancelToken.source()),R=Object(i.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(a){var c,l,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(!0),e.next=4,g.a.Articles.get({slug:a,config:{cancelToken:H.current.token}});case 4:if(c=e.sent,l=c.data,(i=l.article).author.username===L.username){e.next=11;break}return b.error(r("errorModifyAuth")),t.goBack(),e.abrupt("return");case 11:h(!1),A({slug:i.slug,title:i.title,description:i.description,body:i.body,tag:i.tagList.join(", ")}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),e.t0.response&&"404"===e.t0.response.data.status&&t.goBack();case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),[L.username,A,b,r,t]),V=Object(i.useCallback)((function(){H.current.cancel()}),[]);Object(i.useEffect)((function(){return a.slug&&R(a.slug),function(){V()}}),[R,V,a.slug]);return j?s.a.createElement("div",null):s.a.createElement(v.default,{className:"container"},s.a.createElement(m.Helmet,{title:r(I?"headingModify":"headingWrite")}),s.a.createElement("div",{className:"common-form"},s.a.createElement("h2",{className:"form-title"},r(I?"headingModify":"headingWrite")),s.a.createElement("form",{onSubmit:function(e){var n=J.length?J.split(",").map((function(e){return e.trim()})):[];if(e.preventDefault(),function(){var e={};return f.a.isEmpty(F)&&(e.title=r("validate:emptyTitle")),f.a.isEmpty(M)&&(e.description=r("validate:emptyDescription")),f.a.isEmpty(W)&&(e.body=r("validate:emptyBody")),0===Object.keys(e).length||(S(e),!1)}()){w(!0),S({});var c=a.slug?"update":"create";g.a.Articles[c]({article:{slug:I,title:F,description:M,body:W,tagList:n}}).then((function(e){w(!1),t.push("/article/".concat(e.data.article.slug))})).catch((function(e){b.error(r("errorWrite")),w(!1)}))}}},s.a.createElement("fieldset",null,s.a.createElement("div",{className:"form-row"},s.a.createElement("label",null,s.a.createElement("span",{className:"form-head"},r("title")),s.a.createElement("input",Object.assign({type:"text"},B("title"),{placeholder:r("title"),className:"txt large block",disabled:N}))),P.title&&s.a.createElement("p",{className:"input-error"},s.a.createElement("i",{className:"fas fa-times-circle"})," ",P.title)),s.a.createElement("div",{className:"form-row"},s.a.createElement("label",null,s.a.createElement("span",{className:"form-head"},r("description")),s.a.createElement("input",Object.assign({type:"text"},B("description"),{placeholder:r("description"),className:"txt large block",disabled:N}))),P.description&&s.a.createElement("p",{className:"input-error"},s.a.createElement("i",{className:"fas fa-times-circle"})," ",P.description)),s.a.createElement("div",{className:"form-row"},s.a.createElement("label",null,s.a.createElement("span",{className:"form-head"},r("body")),s.a.createElement("textarea",Object.assign({cols:"60",rows:"10"},B("body"),{placeholder:r("body"),className:"txt large block",disabled:N}))),P.body&&s.a.createElement("p",{className:"input-error"},s.a.createElement("i",{className:"fas fa-times-circle"})," ",P.body)),s.a.createElement("div",{className:"form-row"},s.a.createElement("label",null,s.a.createElement("span",{className:"form-head"},r("tag")),s.a.createElement("input",Object.assign({type:"text"},B("tag"),{placeholder:r("tag"),className:"txt large block",disabled:N})))),N&&s.a.createElement("div",null,r("sending")),s.a.createElement("div",{className:"form-action"},s.a.createElement("button",{type:"submit",className:"btn large primary",disabled:N},r("common:write"))," ",s.a.createElement("button",{type:"button",className:"btn large",disabled:N,onClick:t.goBack},r("common:cancel")))))))}))},258:function(e,t,a){"use strict";a.r(t);var r=a(109),n=a(110);function c(){var e=Object(r.a)(["\n"]);return c=function(){return e},e}t.default=n.a.div(c())},542:function(e,t,a){"use strict";var r=a(62),n=a(111),c=a(0);function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(a,!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.a=function(e){var t=Object(c.useState)(e),a=Object(n.a)(t,2),l=a[0],s=a[1],o=Object(c.useCallback)((function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if("string"!==typeof t[0])s((function(e){return i({},e,{},t[0])}));else{var n=t[0],c=t[1];s((function(e){return i({},e,Object(r.a)({},n,c))}))}}),[]),u=Object(c.useCallback)(function(e,t){var a;return function(){var r=this,n=arguments,c=function(){return e.apply(r,n)};clearTimeout(a),a=setTimeout(c,t)}}((function(e,t){s((function(a){return i({},a,Object(r.a)({},e,t))}))}),250),[]),m=Object(c.useCallback)((function(e){var t=e.target,a=t.name,n=t.value;s((function(e){return i({},e,Object(r.a)({},a,n))}))}),[]),b=Object(c.useCallback)((function(e){var t=e.target,a=t.name,r=t.value;u(a,r)}),[u]),f=Object(c.useCallback)((function(e,t){var a;return a={name:e},Object(r.a)(a,t?"defaultValue":"value",l[e]),Object(r.a)(a,"onChange",t?b:m),a}),[m,b,l]);return{form:l,setForm:s,setField:o,changeInput:m,bindInput:f}}},544:function(e,t,a){"use strict";function r(e,t,a,r,n,c,l){try{var i=e[c](l),s=i.value}catch(o){return void a(o)}i.done?t(s):Promise.resolve(s).then(r,n)}function n(e){return function(){var t=this,a=arguments;return new Promise((function(n,c){var l=e.apply(t,a);function i(e){r(l,n,c,i,s,"next",e)}function s(e){r(l,n,c,i,s,"throw",e)}i(void 0)}))}}a.d(t,"a",(function(){return n}))}}]);