(window.webpackJsonp=window.webpackJsonp||[]).push([[4,14],{117:function(e,t,a){"use strict";a.r(t);var n=a(531),r=a.n(n),c=a(532),l=a(96),s=a(0),i=a.n(s),o=a(35),u=a(52),m=a(163),d=a(541),b=a.n(d),f=a(528),p=a(165),g=a(10),v=a(529),E=a(240);t.default=Object(f.hot)(function(e){var t=e.history,a=e.match.params,n=Object(u.c)("form").t,d=Object(p.b)(),f=Object(s.useState)(!1),h=Object(l.a)(f,2),y=h[0],j=h[1],O=Object(s.useState)(!1),N=Object(l.a)(O,2),k=N[0],w=N[1],x=Object(s.useState)({}),C=Object(l.a)(x,2),S=C[0],B=C[1],I=Object(v.a)({slug:"",title:"",description:"",body:"",tag:""}),A=I.form,M=I.setForm,T=I.bindInput,W=A.slug,D=A.title,F=A.description,J=A.body,L=A.tag,P=Object(o.c)(function(e){return e.auth},[]).userInfo,H=Object(s.useRef)(g.a.CancelToken.source()),R=Object(s.useCallback)(function(){var e=Object(c.a)(r.a.mark(function e(a){var c,l,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(!0),e.next=4,g.a.Articles.get({slug:a,config:{cancelToken:H.current.token}});case 4:if(c=e.sent,l=c.data,(s=l.article).author.username===P.username){e.next=11;break}return d.error(n("errorModifyAuth")),t.goBack(),e.abrupt("return");case 11:j(!1),M({slug:s.slug,title:s.title,description:s.description,body:s.body,tag:s.tagList.join(", ")}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),e.t0.response&&"404"===e.t0.response.data.status&&t.goBack();case 18:case"end":return e.stop()}},e,null,[[0,15]])}));return function(t){return e.apply(this,arguments)}}(),[P.username,M,d,n,t]),q=Object(s.useCallback)(function(){H.current.cancel()},[]);Object(s.useEffect)(function(){return a.slug&&R(a.slug),function(){q()}},[R,q,a.slug]);return y?i.a.createElement("div",null):i.a.createElement(E.default,{className:"container"},i.a.createElement(m.Helmet,{title:n(W?"headingModify":"headingWrite")}),i.a.createElement("div",{className:"common-form"},i.a.createElement("h2",{className:"form-title"},n(W?"headingModify":"headingWrite")),i.a.createElement("form",{onSubmit:function(e){var r=L.length?L.split(",").map(function(e){return e.trim()}):[];if(e.preventDefault(),function(){var e={};return b.a.isEmpty(D)&&(e.title=n("validate:emptyTitle")),b.a.isEmpty(F)&&(e.description=n("validate:emptyDescription")),b.a.isEmpty(J)&&(e.body=n("validate:emptyBody")),0===Object.keys(e).length||(B(e),!1)}()){w(!0),B({});var c=a.slug?"update":"create";g.a.Articles[c]({article:{slug:W,title:D,description:F,body:J,tagList:r}}).then(function(e){w(!1),t.push("/article/".concat(e.data.article.slug))}).catch(function(e){d.error(n("errorWrite")),w(!1)})}}},i.a.createElement("fieldset",null,i.a.createElement("div",{className:"form-row"},i.a.createElement("label",null,i.a.createElement("span",{className:"form-head"},n("title")),i.a.createElement("input",Object.assign({type:"text"},T("title"),{placeholder:n("title"),className:"txt large block",disabled:k,value:D}))),S.title&&i.a.createElement("p",{className:"input-error"},i.a.createElement("i",{className:"fas fa-times-circle"})," ",S.title)),i.a.createElement("div",{className:"form-row"},i.a.createElement("label",null,i.a.createElement("span",{className:"form-head"},n("description")),i.a.createElement("input",Object.assign({type:"text"},T("description"),{placeholder:n("description"),className:"txt large block",disabled:k,value:F}))),S.description&&i.a.createElement("p",{className:"input-error"},i.a.createElement("i",{className:"fas fa-times-circle"})," ",S.description)),i.a.createElement("div",{className:"form-row"},i.a.createElement("label",null,i.a.createElement("span",{className:"form-head"},n("body")),i.a.createElement("textarea",Object.assign({cols:"60",rows:"10"},T("body"),{placeholder:n("body"),className:"txt large block",disabled:k,value:J}))),S.body&&i.a.createElement("p",{className:"input-error"},i.a.createElement("i",{className:"fas fa-times-circle"})," ",S.body)),i.a.createElement("div",{className:"form-row"},i.a.createElement("label",null,i.a.createElement("span",{className:"form-head"},n("tag")),i.a.createElement("input",Object.assign({type:"text"},T("tag"),{placeholder:n("tag"),className:"txt large block",disabled:k,value:L})))),k&&i.a.createElement("div",null,n("sending")),i.a.createElement("div",{className:"form-action"},i.a.createElement("button",{type:"submit",className:"btn large primary",disabled:k},n("common:write"))," ",i.a.createElement("button",{type:"button",className:"btn large",disabled:k,onClick:t.goBack},n("common:cancel")))))))})},240:function(e,t,a){"use strict";a.r(t);var n=a(94),r=a(95);function c(){var e=Object(n.a)(["\n"]);return c=function(){return e},e}t.default=r.a.div(c())},529:function(e,t,a){"use strict";var n=a(164),r=a(45),c=a(96),l=a(0);t.a=function(e){var t=Object(l.useState)(e),a=Object(c.a)(t,2),s=a[0],i=a[1],o=Object(l.useCallback)(function(e){var t=e.target,a=t.name,c=t.value;i(function(e){return Object(r.a)({},e,Object(n.a)({},a,c))})},[]),u=Object(l.useCallback)(function(e){return{name:e,value:s[e],onChange:o}},[o,s]);return{form:s,setForm:i,changeInput:o,bindInput:u}}},531:function(e,t,a){e.exports=a(238)},532:function(e,t,a){"use strict";function n(e,t,a,n,r,c,l){try{var s=e[c](l),i=s.value}catch(o){return void a(o)}s.done?t(i):Promise.resolve(i).then(n,r)}function r(e){return function(){var t=this,a=arguments;return new Promise(function(r,c){var l=e.apply(t,a);function s(e){n(l,r,c,s,i,"next",e)}function i(e){n(l,r,c,s,i,"throw",e)}s(void 0)})}}a.d(t,"a",function(){return r})}}]);